"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _dialogPolyfill=_interopRequireDefault(require("dialog-polyfill"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ownKeys(t,e){var l=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),l.push.apply(l,i)}return l}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var l=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(l,!0).forEach(function(e){_defineProperty(t,e,l[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(l)):ownKeys(l).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(l,e))})}return t}function _defineProperty(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var l=0;l<t.length;l++){var i=t[l];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,l){return t&&_defineProperties(e.prototype,t),l&&_defineProperties(e,l),e}var defaultSettings={selector:".js-dialog",closeText:'<?xml version="1.0" encoding="iso-8859-1"?><svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 212.982 212.982" xml:space="preserve"><path style="fill-rule:evenodd;clip-rule:evenodd;" d="M131.804,106.491l75.936-75.936c6.99-6.99,6.99-18.323,0-25.312c-6.99-6.99-18.322-6.99-25.312,0l-75.937,75.937L30.554,5.242c-6.99-6.99-18.322-6.99-25.312,0c-6.989,6.99-6.989,18.323,0,25.312l75.937,75.936L5.242,182.427c-6.989,6.99-6.989,18.323,0,25.312c6.99,6.99,18.322,6.99,25.312,0l75.937-75.937l75.937,75.937c6.989,6.99,18.322,6.99,25.312,0c6.99-6.99,6.99-18.322,0-25.312L131.804,106.491z"/></svg>',scroll:!0,height:"auto",width:"600px",fixed:!1,shadow:!1,elementClass:"dialog"},es6Dialog=function(){function i(e){var t=this,l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Object;_classCallCheck(this,i),this.el=e,this.settings=_objectSpread({},defaultSettings,{},l),this.close=function(e){return t._close(e)},this._setStyles(),this._cleanClasses(),this._setClasses(),this._setScroll(),this._wrapContent(),this._attachEvents()}return _createClass(i,[{key:"open",value:function(){_dialogPolyfill.default.registerDialog(this.el),document.querySelector("body").appendChild(this.el),this.el.showModal()}},{key:"_close",value:function(){this._detachEvents(),document.body.classList.contains("dialog-no-scroll")&&document.body.classList.remove("dialog-no-scroll"),this.el.close()}},{key:"_setStyles",value:function(){Object.assign(this.el.style,{height:this.settings.height,width:this.settings.width})}},{key:"_cleanClasses",value:function(){this.el.removeAttribute("class"),this.el.classList.add(this.settings.elementClass)}},{key:"_setClasses",value:function(){this.settings.fixed&&this.el.classList.add("-fixed"),this.settings.shadow&&this.el.classList.add("-shadow")}},{key:"_setScroll",value:function(){this.settings.scroll||document.body.classList.add("dialog-no-scroll")}},{key:"_wrapContent",value:function(){function e(e){return null!==t.el.querySelector(e)}var t=this;if(!e(".dialog__wrapper")){var l=document.createElement("div");for(l.classList.add("dialog__wrapper");this.el.children.length;)l.appendChild(this.el.children[0]);this.el.appendChild(l)}if(!e(".js-close-dialog")){var i=document.createElement("a");i.classList.add("js-close-dialog","dialog__close"),i.setAttribute("data-dialog-id",this.el.getAttribute("id")),i.innerHTML=this.settings.closeText,this.el.appendChild(i)}}},{key:"_attachEvents",value:function(){var t=this;this.el.querySelector(".js-close-dialog")&&this.el.querySelector(".js-close-dialog").addEventListener("click",this.close),document.querySelector("._dialog_overlay")&&document.querySelector("._dialog_overlay").addEventListener("click",this.close),document.addEventListener("click",function(e){e.target===t.el&&t.close()})}},{key:"_detachEvents",value:function(){this.el.querySelector(".js-close-dialog")&&this.el.querySelector(".js-close-dialog").removeEventListener("click",this.close),document.querySelector("._dialog_overlay")&&document.querySelector("._dialog_overlay").removeEventListener("click",this.close)}}]),i}(),_default={init:function(e,t){var l=0<arguments.length&&void 0!==e?e:new Object,i=1<arguments.length?t:void 0,o=_objectSpread({},defaultSettings,{},l),s=document.querySelectorAll(o.selector);if(0<!s.length)throw new Error('âš“ï¸ No link found with the "'.concat(o.selector,'" class'));s.forEach(function(i){i.addEventListener("click",function(e){e.preventDefault();var t=document.getElementById(i.getAttribute("data-dialog-id"));if(null===t)throw new Error('ðŸŽ¯ No dialog found with the "'.concat(i.getAttribute("data-dialog-id"),'" id'));if(i.hasAttribute("data-dialog-options")){var l=_objectSpread({},o,{},JSON.parse(i.getAttribute("data-dialog-options")));new es6Dialog(t,l).open()}else new es6Dialog(t,o).open()})}),"function"==typeof i&&i()&&i()},create:function(e,t,l){var i=1<arguments.length&&void 0!==t?t:new Object,o=2<arguments.length?l:void 0;try{_dialogPolyfill.default.registerDialog(e),new es6Dialog(e,i).open(),"function"==typeof o&&o()&&o()}catch(e){console.error("ðŸ¥¶ Couldn't create the dialog. You may want to check your code")}}};exports.default=_default,window.es6Dialog=es6Dialog;